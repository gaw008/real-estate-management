# æˆ¿åœ°äº§ç®¡ç†ç³»ç»Ÿ - æ¶æ„ä¸è¿ç»´æŒ‡å—

## ğŸ“‹ ç³»ç»Ÿæ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäºFlaskçš„æˆ¿åœ°äº§ç®¡ç†Webåº”ç”¨ï¼Œç”¨äºç®¡ç†æˆ¿äº§ä¿¡æ¯ã€ä¸šä¸»æ•°æ®å’Œè´¢åŠ¡æŠ¥è¡¨ã€‚ç³»ç»Ÿé‡‡ç”¨Python + MySQLæ¶æ„ï¼Œéƒ¨ç½²åœ¨äº‘ç«¯æ•°æ®åº“æœåŠ¡ä¸Šã€‚

### ğŸ¯ ä¸»è¦åŠŸèƒ½
- **æˆ¿äº§ç®¡ç†**ï¼šæˆ¿äº§ä¿¡æ¯æŸ¥çœ‹ã€è¯¦æƒ…å±•ç¤º
- **ä¸šä¸»ç®¡ç†**ï¼šä¸šä¸»ä¿¡æ¯ç®¡ç†ã€æˆ¿äº§åˆ†é…
- **è´¢åŠ¡æŠ¥è¡¨**ï¼šè´¢åŠ¡æŠ¥è¡¨ä¸Šä¼ ã€ç®¡ç†å’ŒæŸ¥çœ‹
- **ç”¨æˆ·ç³»ç»Ÿ**ï¼šå¤šè§’è‰²ç”¨æˆ·ç®¡ç†ï¼ˆç®¡ç†å‘˜ã€ä¸šä¸»ã€æŸ¥çœ‹è€…ï¼‰
- **å¤šè¯­è¨€æ”¯æŒ**ï¼šä¸­è‹±æ–‡ç•Œé¢åˆ‡æ¢

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **åç«¯æ¡†æ¶**ï¼šFlask (Python)
- **æ•°æ®åº“**ï¼šMySQL (Aivenäº‘æœåŠ¡)
- **å‰ç«¯**ï¼šHTML/CSS/JavaScript + Bootstrap
- **éƒ¨ç½²**ï¼šæ”¯æŒæœ¬åœ°å’ŒRenderäº‘éƒ¨ç½²

### ä¸»è¦æ–‡ä»¶ç»“æ„
```
sqldatabase/
â”œâ”€â”€ real_estate_web.py          # ä¸»Webåº”ç”¨
â”œâ”€â”€ financial_reports.py        # è´¢åŠ¡æŠ¥è¡¨æ ¸å¿ƒæ¨¡å—
â”œâ”€â”€ config.py                   # æ•°æ®åº“é…ç½®
â”œâ”€â”€ config_loader.py            # é…ç½®åŠ è½½å™¨
â”œâ”€â”€ auth_system.py              # è®¤è¯ç³»ç»Ÿ
â”œâ”€â”€ automated_test_suite.py     # è‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶
â”œâ”€â”€ templates/                  # HTMLæ¨¡æ¿
â”œâ”€â”€ static/                     # é™æ€èµ„æº
â””â”€â”€ requirements.txt            # Pythonä¾èµ–
```

## ğŸ—„ï¸ æ•°æ®åº“é…ç½®

### å½“å‰æ•°æ®åº“é…ç½®ï¼ˆAiven MySQLï¼‰
```
Host: gng-4d77d5e-gngvacation-8888.f.aivencloud.com
Port: 21192
Database: defaultdb
User: avnadmin
Password: [ä»ç¯å¢ƒå˜é‡æˆ–config.pyè·å–]
```

### ç¯å¢ƒå˜é‡é…ç½®
ç³»ç»Ÿæ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®æ•°æ®åº“è¿æ¥ï¼š
```bash
export DB_HOST="..."
export DB_PORT="21192"
export DB_NAME="defaultdb" 
export DB_USER="avnadmin"
export DB_PASSWORD="..."
```

### æ ¸å¿ƒæ•°æ®è¡¨
- **properties**: æˆ¿äº§ä¿¡æ¯è¡¨
- **owners**: ä¸šä¸»ä¿¡æ¯è¡¨  
- **users**: ç”¨æˆ·è®¤è¯è¡¨
- **financial_reports**: è´¢åŠ¡æŠ¥è¡¨è¡¨
- **property_assignments**: æˆ¿äº§åˆ†é…å…³ç³»è¡¨

## ğŸ”§ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. è´¢åŠ¡æŠ¥è¡¨ç®¡ç† (`financial_reports.py`)
**ç±»**: `FinancialReportsManager`

**æ ¸å¿ƒæ–¹æ³•**ï¼š
- `get_properties_list()`: è·å–æˆ¿äº§åˆ—è¡¨
- `add_financial_report()`: æ·»åŠ è´¢åŠ¡æŠ¥è¡¨
- `get_all_reports()`: è·å–æ‰€æœ‰æŠ¥è¡¨ï¼ˆè¿”å›å­—å…¸æ ¼å¼ï¼‰
- `delete_report()`: åˆ é™¤æŠ¥è¡¨
- `get_db_connection()`: æ•°æ®åº“è¿æ¥

**é‡è¦**: `get_all_reports()`è¿”å›æ ¼å¼ä¸ºï¼š
```python
{
    'reports': [...],
    'total_count': int
}
```

### 2. Webè·¯ç”± (`real_estate_web.py`)
**é‡è¦è·¯ç”±**ï¼š
- `/admin/financial_reports`: è´¢åŠ¡æŠ¥è¡¨ç®¡ç†é¡µé¢
- `/owner/financial_reports`: ä¸šä¸»è´¢åŠ¡æŠ¥è¡¨æŸ¥çœ‹
- `/properties`: æˆ¿äº§åˆ—è¡¨
- `/owners`: ä¸šä¸»åˆ—è¡¨

### 3. è®¤è¯ç³»ç»Ÿ (`auth_system.py`)
**è£…é¥°å™¨**ï¼š
- `@login_required`: éœ€è¦ç™»å½•
- `@admin_required`: éœ€è¦ç®¡ç†å‘˜æƒé™
- `@owner_required`: éœ€è¦ä¸šä¸»æƒé™

## ğŸš¨ å·²çŸ¥é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 1. æ•°æ®åº“è¿æ¥é—®é¢˜
**é—®é¢˜**: ç«¯å£å˜æ›´å¯¼è‡´è¿æ¥å¤±è´¥
**è§£å†³**: æ›´æ–°config.pyä¸­çš„é»˜è®¤ç«¯å£ä»28888æ”¹ä¸º21192

### 2. è´¢åŠ¡æŠ¥è¡¨Internal Server Error
**é—®é¢˜**: `get_all_reports()`è¿”å›æ ¼å¼ä¸åŒ¹é…
**è§£å†³**: æ›´æ–°real_estate_web.pyä¸­çš„æ•°æ®è§£åŒ…æ–¹å¼

### 3. SQLåˆ—åä¸åŒ¹é…
**é—®é¢˜**: ä»£ç æœŸæœ›'address'ä½†æ•°æ®åº“æ˜¯'street_address'
**è§£å†³**: ä½¿ç”¨`street_address as address`æ˜ å°„

### 4. è´¢åŠ¡æŠ¥è¡¨è¡¨ç»“æ„é—®é¢˜
**é—®é¢˜**: è¡¨ç»“æ„åŸºäºowner_idä½†ä»£ç æœŸæœ›property_id
**è§£å†³**: é‡å»ºè¡¨ç»“æ„ä½¿ç”¨property_id

## ğŸ§ª æµ‹è¯•ä¸éªŒè¯

### è‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶
è¿è¡Œå®Œæ•´æµ‹è¯•ï¼š
```bash
python3 automated_test_suite.py
```

**æµ‹è¯•è¦†ç›–**ï¼š
- æ•°æ®åº“è¿æ¥æµ‹è¯•
- æˆ¿äº§åˆ—è¡¨è·å–æµ‹è¯•
- è´¢åŠ¡æŠ¥è¡¨è¡¨ç»“æ„æµ‹è¯•
- Flaskåº”ç”¨å¯¼å…¥æµ‹è¯•
- è·¯ç”±åŠŸèƒ½æµ‹è¯•
- æ•°æ®ä¿å­˜æµ‹è¯•

### æµ‹è¯•ç»“æœè§£è¯»
- âœ… æ‰€æœ‰8é¡¹æµ‹è¯•é€šè¿‡ = ç³»ç»Ÿæ­£å¸¸
- âŒ ä»»ä½•æµ‹è¯•å¤±è´¥ = éœ€è¦ä¿®å¤ç›¸åº”åŠŸèƒ½

## ğŸš€ å¯åŠ¨ä¸è¿è¡Œ

### 1. æœ¬åœ°å¯åŠ¨
```bash
python3 real_estate_web.py
```
è®¿é—®: http://127.0.0.1:8888

### 2. ç¯å¢ƒæ£€æŸ¥
è¿è¡Œå¯åŠ¨å‰æ£€æŸ¥ï¼š
```bash
python3 automated_test_suite.py
```

### 3. å¸¸ç”¨ç®¡ç†å‘˜è´¦æˆ·
éœ€è¦é€šè¿‡æ•°æ®åº“æŸ¥è¯¢usersè¡¨è·å–å…·ä½“è´¦æˆ·ä¿¡æ¯

## ğŸ“Š ç³»ç»Ÿç›‘æ§

### å¥åº·æ£€æŸ¥æŒ‡æ ‡
1. **æ•°æ®åº“è¿æ¥**: èƒ½å¦æˆåŠŸè¿æ¥Aiven MySQL
2. **æˆ¿äº§æ•°æ®**: åº”æœ‰92ä¸ªæˆ¿äº§è®°å½•
3. **ç”¨æˆ·æ•°æ®**: åº”æœ‰73ä¸ªç”¨æˆ·è®°å½•
4. **è´¢åŠ¡æŠ¥è¡¨**: è¡¨ç»“æ„æ­£ç¡®ä¸”åŠŸèƒ½æ­£å¸¸

### æ€§èƒ½æŒ‡æ ‡
- æ•°æ®åº“æŸ¥è¯¢å“åº”æ—¶é—´
- Webé¡µé¢åŠ è½½æ—¶é—´
- æµ‹è¯•å¥—ä»¶æ‰§è¡Œæ—¶é—´ï¼ˆæ­£å¸¸çº¦3ç§’ï¼‰

## ğŸ”„ å¼€å‘æµç¨‹

### ä»£ç æ›´æ–°æµç¨‹
1. **ä¿®æ”¹ä»£ç **
2. **è¿è¡Œæµ‹è¯•**: `python3 automated_test_suite.py`
3. **æäº¤Git**: `git add . && git commit -m "æè¿°"`
4. **æ¨é€GitHub**: `git push origin main`

### é—®é¢˜è¯Šæ–­æ­¥éª¤
1. è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•ç¡®å®šé—®é¢˜èŒƒå›´
2. æ£€æŸ¥æ•°æ®åº“è¿æ¥çŠ¶æ€
3. æŸ¥çœ‹Webåº”ç”¨å¯åŠ¨æ—¥å¿—
4. é’ˆå¯¹æ€§ä¿®å¤é—®é¢˜
5. é‡æ–°æµ‹è¯•éªŒè¯

## ğŸ“ é‡è¦é…ç½®æ–‡ä»¶

### config.py
æ•°æ®åº“è¿æ¥é…ç½®ï¼Œæ”¯æŒç¯å¢ƒå˜é‡è¦†ç›–

### requirements.txt
Pythonä¾èµ–åŒ…åˆ—è¡¨

### streamlit_config.toml
Streamlitåº”ç”¨é…ç½®ï¼ˆå¦‚æœä½¿ç”¨ï¼‰

## ğŸŒ éƒ¨ç½²ä¿¡æ¯

### GitHubä»“åº“
- ä»“åº“: `gaw008/real-estate-management`
- åˆ†æ”¯: `main`
- è‡ªåŠ¨æ¨é€: æ¯æ¬¡ä¿®å¤åè‡ªåŠ¨æ¨é€

### Renderéƒ¨ç½²
æ”¯æŒéƒ¨ç½²åˆ°Renderå¹³å°ï¼Œéœ€è¦é…ç½®ç¯å¢ƒå˜é‡

## ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹

1. **æ•æ„Ÿä¿¡æ¯**: æ•°æ®åº“å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯å·²ä»ä»£ç ä¸­ç§»é™¤
2. **ç¯å¢ƒå˜é‡**: ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿé…ç½®
3. **ç”¨æˆ·è®¤è¯**: å®Œæ•´çš„ç”¨æˆ·æƒé™ç®¡ç†ç³»ç»Ÿ
4. **SSLè¿æ¥**: æ•°æ®åº“è¿æ¥ä½¿ç”¨SSLåŠ å¯†

## ğŸ“ æ•…éšœå¤„ç†

### å¸¸è§é—®é¢˜å¿«é€Ÿè¯Šæ–­

**é—®é¢˜1: Internal Server Error**
```bash
# æ£€æŸ¥Flaskåº”ç”¨å¯¼å…¥
python3 -c "import real_estate_web; print('OK')"
```

**é—®é¢˜2: æ•°æ®åº“è¿æ¥å¤±è´¥**  
```bash
# æµ‹è¯•æ•°æ®åº“è¿æ¥
python3 -c "from financial_reports import financial_reports_manager; print(financial_reports_manager.get_db_connection())"
```

**é—®é¢˜3: æˆ¿äº§åˆ—è¡¨ä¸ºç©º**
```bash
# æ£€æŸ¥æˆ¿äº§æ•°æ®
python3 -c "from financial_reports import financial_reports_manager; print(len(financial_reports_manager.get_properties_list()))"
```

### ç´§æ€¥æ¢å¤æ­¥éª¤
1. è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶ç¡®å®šé—®é¢˜
2. æ£€æŸ¥æœ€è¿‘çš„Gitæäº¤è®°å½•
3. å¦‚éœ€å›æ»šï¼Œä½¿ç”¨Gitæ¢å¤åˆ°ä¸Šä¸€ä¸ªå·¥ä½œç‰ˆæœ¬
4. é‡æ–°è¿è¡Œæµ‹è¯•éªŒè¯

---

## ğŸ“ æ›´æ–°è®°å½•

- **2024-12**: ä¿®å¤è´¢åŠ¡æŠ¥è¡¨Internal Server Error
- **2024-12**: æ·»åŠ è‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶
- **2024-12**: ä¿®å¤æ•°æ®åº“è¿æ¥ç«¯å£é—®é¢˜
- **2024-12**: é‡æ„è´¢åŠ¡æŠ¥è¡¨è¡¨ç»“æ„

---
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2024å¹´12æœˆ  
**ç»´æŠ¤è€…**: æˆ¿åœ°äº§ç®¡ç†ç³»ç»Ÿå¼€å‘å›¢é˜Ÿ 