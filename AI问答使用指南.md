# 🤖 AI智能问答系统使用指南

## 📖 系统概述

我们的增强版AI问答系统现在能够理解多种中文表达方式，为您的房地产数据提供智能查询服务。无论您是否配置了OpenAI API，系统都能为您提供准确的数据分析。

## 🆕 新功能：房产ID专项查询

### 🏠 支持的房产ID查询类型

#### 1. 🗑️ 垃圾收集日查询
**英文问法:**
- "What is the trash day for property id '1101BMP'?"
- "What is the trash day for property id '10654 El Monte'?"
- "What is the trash day for 109 Irvine?"

**中文问法:**
- "查询房产1101BMP的垃圾收集日"
- "房产ID 10654 El Monte的垃圾收集日是什么时候？"
- "告诉我109 Irvine的垃圾收集日"

**返回结果:** 指定房产的垃圾收集日、城市、州信息

---

#### 2. 📶 WiFi信息查询
**英文问法:**
- "What is the WiFi information for property 109 Irvine?"
- "What is the WiFi for property id '1203 Glendora'?"
- "WiFi info for 10654 El Monte"

**中文问法:**
- "房产ID 109 Irvine的WiFi信息是什么？"
- "告诉我1203 Glendora的WiFi信息"
- "10654 El Monte的无线网络信息"

**返回结果:** WiFi名称、密码、城市信息

---

#### 3. 🏗️ 房型布局查询
**英文问法:**
- "What is the layout for property id 1203 Glendora?"
- "What is the layout for 109 Irvine?"
- "Property 10654 El Monte layout information"

**中文问法:**
- "告诉我房产1203 Glendora的房型布局"
- "109 Irvine的房型信息"
- "10654 El Monte的户型是什么？"

**返回结果:** 房型布局、面积、入住人数、城市

---

#### 4. 📍 地址信息查询
**英文问法:**
- "What is the address for property 10654 El Monte?"
- "What is the address for property id '109 Irvine'?"

**中文问法:**
- "10654 El Monte的地址信息"
- "房产编号109 Irvine的地址"

**返回结果:** 详细地址、城市、州信息

---

#### 5. 🔐 门禁密码查询
**英文问法:**
- "What is the door code for property id '10654 El Monte'?"
- "What is the front door code for 109 Irvine?"

**中文问法:**
- "房产编号10654 El Monte的门禁密码"
- "109 Irvine的前门密码是什么？"

**返回结果:** 前门密码、储物密码、城市信息

---

#### 6. 💰 管理费查询
**英文问法:**
- "What is the management fee percentage for property 10654 El Monte?"
- "What is the management fee for property id '109 Irvine'?"
- "Management fee for 1203 Glendora"

**中文问法:**
- "房产10654 El Monte的管理费是多少？"
- "查询109 Irvine的管理费百分比"
- "1203 Glendora的管理费信息"

**返回结果:** 管理费百分比、城市、州信息

---

#### 7. 👤 业主查询
**英文问法:**
- "Who is the owner of property 10654 El Monte?"
- "What is the owner information for property id '109 Irvine'?"
- "Owner of 1203 Glendora"

**中文问法:**
- "10654 El Monte这个房子的owner是谁？"
- "房产109 Irvine的业主是谁？"
- "查询1203 Glendora的房东信息"
- "谁是1101BMP的业主？"

**返回结果:** 业主姓名、联系电话、邮箱地址、城市、州

---

#### 8. 📋 完整信息查询
**英文问法:**
- "Show me property id 10654 El Monte information"
- "Tell me about property 109 Irvine"
- "109 Irvine property details"

**中文问法:**
- "给我看房产10654 El Monte的全部信息"
- "告诉我109 Irvine的详细信息"
- "1203 Glendora的完整信息"

**返回结果:** 房产的所有可用信息（地址、房型、面积、WiFi、垃圾收集日、门禁密码等）

---

## 🎯 支持的问题类型

### 1. 📊 基础统计类
**支持的问法:**
- "有多少房产？"
- "房产总数是多少？"
- "一共有几套房子？"
- "业主总数是多少？"
- "总共多少业主？"

**返回结果:** 精确的数量统计

---

### 2. 🌍 地理分布类
**支持的问法:**
- "各个城市的房产分布如何？"
- "不同城市房产数量"
- "哪些城市有房产？"
- "房产在各州的分布"
- "城市房产统计"

**返回结果:** 按城市/州分组的房产数量排行榜

---

### 3. 🏠 房型分析类
**支持的问法:**
- "房型分布情况如何？"
- "各种户型的数量统计"
- "房产布局种类"
- "户型统计"

**返回结果:** 各种房型的数量分布

---

### 4. 📍 地区专项查询
**支持的问法:**
- "加州有多少房产？"
- "California的房产分布"
- "加利福尼亚房产统计"

**返回结果:** 特定地区的详细房产分布

---

### 5. 📶 WiFi覆盖分析
**支持的问法:**
- "WiFi覆盖情况如何？"
- "有多少房产配备无线网？"
- "网络覆盖率统计"
- "无线网络情况"

**返回结果:** WiFi覆盖统计和覆盖率

---

### 6. 📐 面积统计类
**支持的问法:**
- "房产平均面积是多少？"
- "平均房子大小"
- "房产面积统计"

**返回结果:** 平均面积和相关统计

---

### 7. 👥 入住人数分析
**支持的问法:**
- "平均入住人数"
- "房产容纳能力"
- "入住人数统计"

**返回结果:** 入住人数的统计分析

---

### 8. 💰 财务相关查询
**支持的问法:**
- "合同签约情况统计"
- "有多少签约？"
- "签约率如何？"

**返回结果:** 签约统计和签约率

---

### 9. 📞 联系方式统计
**支持的问法:**
- "业主联系方式完整度"
- "有多少业主提供了邮箱？"
- "联系信息统计"

**返回结果:** 联系方式完整度统计

---

### 10. 🏆 排行榜查询
**支持的问法:**
- "哪个城市房产最多？"
- "房产数量前10的城市"
- "城市房产排行"

**返回结果:** 城市房产数量排行榜

---

## 🎨 查询结果展示

### 📊 单值结果
```
✅ 查询成功! 共找到 1 条记录
📊 答案: 92
```

### 🏠 房产信息结果
```
✅ 查询成功! 共找到 1 条记录
📋 房产信息:
   • 房产名称: 10654 El Monte
   • 垃圾收集日: Thursday
   • 城市: El Monte
   • 州: California
```

### 📈 统计列表
```
✅ 查询成功! 共找到 40 条记录
📈 详细结果:
• Glendora: 10
• Ontario: 7
• Altadena: 6
• Los Angeles: 6
• Irvine: 5
...
```

### 📋 多列数据
```
✅ 查询成功! 共找到 20 条记录
📋 前10条结果预览 (共20条):
• 10654 El Monte: El Monte
• 109 Irvine: Irvine
• 1101 B Monterey Park: Monterey Park
...
```

---

## 💡 提问技巧

### ✅ 推荐的提问方式

1. **明确具体**: "What is the trash day for property id '1101BMP'?" 比 "房产信息" 更容易理解
2. **使用关键词**: 包含"房产"、"业主"、"城市"、具体房产ID等核心词汇
3. **自然表达**: 可以使用日常口语，如"一共有几套房子？"
4. **指定范围**: 如"加州的房产分布"比"房产分布"更精确
5. **房产ID格式**: 支持带引号或不带引号，如 "1101BMP" 或 1101BMP
6. **包含空格的ID**: 支持"10654 El Monte"、"109 Irvine"等格式

### ❌ 避免的提问方式

1. **过于模糊**: "数据情况"、"统计一下"
2. **缺少关键词**: "有多少？"(没说明查什么)
3. **复杂句式**: 避免过长的复合句

---

## 🏠 房产ID格式支持

系统支持多种房产ID格式：

- **纯数字**: `10654`、`109`、`1203`
- **字母数字组合**: `1101BMP`、`1203Glendora`
- **包含空格**: `10654 El Monte`、`109 Irvine`、`1203 Glendora`
- **带引号**: `"1101BMP"`、`"10654 El Monte"`
- **不带引号**: `1101BMP`、`10654 El Monte`

### 📝 房产ID查询示例

```
用户: What is the trash day for property id "10654 El Monte"?

AI: ✅ 查询成功! 共找到 1 条记录
📋 房产信息:
   • 房产名称: 10654 El Monte  
   • 垃圾收集日: Thursday
   • 城市: El Monte
   • 州: California
```

---

## 🔧 系统配置

### 🟢 OpenAI模式 (推荐)
如果您配置了OpenAI API密钥，系统将使用GPT模型进行更智能的问题理解，能处理更复杂和灵活的问题表达。

**配置方法**: 在`.env`文件中设置
```
OPENAI_API_KEY=your_api_key_here
OPENAI_MODEL=gpt-3.5-turbo
```

### 🟡 内置模式
即使没有OpenAI API，系统仍然提供强大的模式匹配功能，支持20种不同类型的查询模式，包括8种房产ID专项查询。

---

## 🛡️ 安全保障

- **只读查询**: 系统只支持SELECT查询，确保数据安全
- **结果限制**: 自动添加LIMIT限制，避免过大查询
- **输入验证**: 禁止危险的SQL操作词汇
- **错误处理**: 友好的错误提示和建议

---

## 📞 使用支持

### 🆘 如果问题无法理解
系统会提供建议性的问题示例：
```
❌ 无法理解您的问题。请尝试：
• 有多少房产？
• 各个城市房产分布如何？
• 加州有多少房产？
• WiFi覆盖情况如何？
• What is the trash day for property id "1101BMP"?
```

### 🔄 兜底机制
对于包含"房产"或"业主"等关键词但表达模糊的问题，系统会提供基础信息查询。

---

## 🎉 开始使用

1. 打开Streamlit应用: http://localhost:8501
2. 在侧边栏选择"🤖 AI智能问答"
3. 在文本框中输入您的问题
4. 点击"🚀 AI问答"按钮
5. 查看生成的SQL查询和结果

### 🌟 新功能亮点
- **支持具体房产查询**: 可以查询任何房产的具体信息
- **中英文双语**: 完全支持中文和英文提问
- **智能ID识别**: 自动识别各种格式的房产ID
- **精确匹配**: 准确返回指定房产的相关信息

享受智能问答带来的便利吧！🚀 