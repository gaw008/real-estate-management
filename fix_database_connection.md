# Aiven MySQL æ•°æ®åº“è¿žæŽ¥ä¿®å¤æŒ‡å—

## ðŸ” é—®é¢˜è¯Šæ–­ç»“æžœ

æ ¹æ®æµ‹è¯•ç»“æžœï¼Œå‘çŽ°ä»¥ä¸‹é—®é¢˜ï¼š

### âœ… æ­£å¸¸é¡¹ç›®
- **ç½‘ç»œè¿žé€šæ€§**: å¯ä»¥æ­£å¸¸è®¿é—® Aiven æœåŠ¡å™¨
- **ä¸»æœºåœ°å€**: `gng-4d77d5e-gngvacation-8888.f.aivencloud.com:21192`

### âŒ éœ€è¦ä¿®å¤çš„é—®é¢˜

#### 1. å…³é”®é—®é¢˜ï¼šç¼ºå°‘æ•°æ®åº“å¯†ç 
**é”™è¯¯**: `Access denied for user 'avnadmin'`
**åŽŸå› **: çŽ¯å¢ƒå˜é‡ `DB_PASSWORD` æœªè®¾ç½®

#### 2. SSLè¿žæŽ¥é…ç½®é—®é¢˜  
**é”™è¯¯**: `SSL: WRONG_VERSION_NUMBER`
**åŽŸå› **: å¯èƒ½ç«¯å£é…ç½®æˆ–SSLåè®®ç‰ˆæœ¬ä¸åŒ¹é…

## ðŸ”§ ä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: è®¾ç½®çŽ¯å¢ƒå˜é‡ï¼ˆæŽ¨èï¼‰

```bash
# è®¾ç½®æ•°æ®åº“å¯†ç ï¼ˆè¯·æ›¿æ¢ä¸ºå®žé™…å¯†ç ï¼‰
export DB_PASSWORD='ä½ çš„å®žé™…æ•°æ®åº“å¯†ç '

# å¯é€‰ï¼šè®¾ç½®å…¶ä»–çŽ¯å¢ƒå˜é‡
export DB_HOST='gng-4d77d5e-gngvacation-8888.f.aivencloud.com'
export DB_PORT='21192'
export DB_DATABASE='defaultdb'
export DB_USER='avnadmin'

# éªŒè¯è®¾ç½®
echo "å¯†ç å·²è®¾ç½®: $(if [ -n "$DB_PASSWORD" ]; then echo "æ˜¯"; else echo "å¦"; fi)"
```

### æ–¹æ¡ˆ2: ç›´æŽ¥ä¿®æ”¹ config.py æ–‡ä»¶

```python
# åœ¨ config.py ä¸­ç›´æŽ¥è®¾ç½®å¯†ç ï¼ˆä¸æŽ¨èç”¨äºŽç”Ÿäº§çŽ¯å¢ƒï¼‰
DB_CONFIG = {
    'host': 'gng-4d77d5e-gngvacation-8888.f.aivencloud.com',
    'port': 21192,
    'database': 'defaultdb',
    'user': 'avnadmin',
    'password': 'ä½ çš„å®žé™…æ•°æ®åº“å¯†ç ',  # åœ¨è¿™é‡Œå¡«å…¥å®žé™…å¯†ç 
    'ssl_disabled': False,
    'ssl_verify_cert': False,
    'ssl_verify_identity': False
}
```

### æ–¹æ¡ˆ3: åˆ›å»º .env æ–‡ä»¶

```bash
# åˆ›å»º .env æ–‡ä»¶
cat > .env << EOF
DB_HOST=gng-4d77d5e-gngvacation-8888.f.aivencloud.com
DB_PORT=21192
DB_DATABASE=defaultdb
DB_USER=avnadmin
DB_PASSWORD=ä½ çš„å®žé™…æ•°æ®åº“å¯†ç 
EOF

# è®¾ç½®æ–‡ä»¶æƒé™
chmod 600 .env
```

## ðŸ” èŽ·å–æ­£ç¡®çš„æ•°æ®åº“å¯†ç 

### å¦‚æžœæ‚¨æœ‰ Aiven æŽ§åˆ¶å°è®¿é—®æƒé™ï¼š

1. ç™»å½• [Aiven æŽ§åˆ¶å°](https://console.aiven.io/)
2. æ‰¾åˆ°æ‚¨çš„ MySQL æœåŠ¡å®žä¾‹
3. åœ¨æœåŠ¡è¯¦æƒ…é¡µé¢æŸ¥çœ‹è¿žæŽ¥ä¿¡æ¯
4. å¤åˆ¶ `avnadmin` ç”¨æˆ·çš„å¯†ç 

### å¦‚æžœå¿˜è®°äº†å¯†ç ï¼š

1. åœ¨ Aiven æŽ§åˆ¶å°é‡ç½®å¯†ç 
2. æˆ–è”ç³» Aiven æ”¯æŒå›¢é˜Ÿ
3. æˆ–åˆ›å»ºæ–°çš„æ•°æ®åº“ç”¨æˆ·

## ðŸ§ª éªŒè¯ä¿®å¤

ä¿®å¤åŽè¿è¡Œæµ‹è¯•ï¼š

```bash
# é‡æ–°æµ‹è¯•è¿žæŽ¥
python3 test_database_connection.py

# æˆ–è€…å¿«é€Ÿæµ‹è¯•
python3 -c "
import os
print('å¯†ç çŠ¶æ€:', 'å·²è®¾ç½®' if os.environ.get('DB_PASSWORD') else 'æœªè®¾ç½®')
"
```

## ðŸš¨ å¸¸è§é”™è¯¯å¤„ç†

### é”™è¯¯1: `Access denied`
- **æ£€æŸ¥**: å¯†ç æ˜¯å¦æ­£ç¡®
- **è§£å†³**: é‡æ–°èŽ·å–æˆ–é‡ç½®å¯†ç 

### é”™è¯¯2: `SSL connection error`
- **æ£€æŸ¥**: SSLé…ç½®å’Œç«¯å£
- **è§£å†³**: å°è¯•ä¸åŒçš„SSLè®¾ç½®

### é”™è¯¯3: `Connection timeout`
- **æ£€æŸ¥**: ç½‘ç»œå’Œé˜²ç«å¢™
- **è§£å†³**: æ£€æŸ¥IPç™½åå•è®¾ç½®

## ðŸ“ æœ€ä½³å®žè·µ

1. **å®‰å…¨æ€§**: ä½¿ç”¨çŽ¯å¢ƒå˜é‡å­˜å‚¨å¯†ç ï¼Œä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç 
2. **æƒé™**: è®¾ç½®é€‚å½“çš„æ–‡ä»¶æƒé™ä¿æŠ¤æ•æ„Ÿä¿¡æ¯
3. **å¤‡ä»½**: ä¿å­˜æ­£ç¡®çš„è¿žæŽ¥å‚æ•°ä»¥ä¾¿æ¢å¤
4. **ç›‘æŽ§**: å®šæœŸæ£€æŸ¥æ•°æ®åº“è¿žæŽ¥çŠ¶æ€

## ðŸ”„ é‡å¯åº”ç”¨

ä¿®å¤åŽé‡å¯æˆ¿åœ°äº§ç®¡ç†ç³»ç»Ÿï¼š

```bash
# åœæ­¢å½“å‰è¿è¡Œçš„æœåŠ¡
pkill -f "python3 real_estate_web.py"

# é‡æ–°å¯åŠ¨
python3 real_estate_web.py
```

## ðŸ“ž å¦‚éœ€å¸®åŠ©

å¦‚æžœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼š

1. æ£€æŸ¥ Aiven æœåŠ¡çŠ¶æ€
2. éªŒè¯ç½‘ç»œè¿žæŽ¥
3. ç¡®è®¤ IP åœ°å€æ˜¯å¦åœ¨ç™½åå•ä¸­
4. è”ç³» Aiven æŠ€æœ¯æ”¯æŒ

---

**æ³¨æ„**: è¯·ç¡®ä¿å°† `ä½ çš„å®žé™…æ•°æ®åº“å¯†ç ` æ›¿æ¢ä¸ºä»Ž Aiven æŽ§åˆ¶å°èŽ·å–çš„çœŸå®žå¯†ç ã€‚ 