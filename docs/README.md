# 🏡 房地产管理系统 Real Estate Management System

一个基于Python Flask和MySQL的房地产管理系统，部署在Render云平台上，支持用户认证、房产管理和收入查询。

## 🌐 在线访问

系统已部署在Render云平台上，可通过以下方式访问：
- **网站地址**: [您的Render应用URL]
- **数据库**: Aiven MySQL云数据库
- **部署平台**: Render

## 🚀 功能特性

### 用户管理系统
- ✅ **双重用户类型**：
  - 管理员（公司内部人员）- 查看所有房产信息
  - 业主 - 查看自己的房产和收入明细
- ✅ 安全的用户认证和会话管理
- ✅ 密码哈希加密存储
- ✅ 基于角色的访问控制

### 房产管理功能
- ✅ 房产信息查询和管理
- ✅ 业主信息管理
- ✅ 财务数据和收入明细查询
- ✅ 数据统计和分析

### 安全特性
- ✅ PBKDF2-HMAC-SHA256密码加密
- ✅ 会话管理和权限控制
- ✅ SSL加密数据传输
- ✅ 环境变量安全配置

## 🏗️ 系统架构

### 数据库架构
系统采用4表架构，针对检索效率优化：

1. **Properties** (房产主表)
   - 房产基本信息、地理位置
   - 容量和面积数据

2. **Owners_Master** (业主主表)
   - 去重的业主信息
   - 联系方式和身份信息

3. **Property_Owners** (关系表)
   - 房产-业主多对多关系
   - 支持共同所有权

4. **Finance** (财务表)
   - 收入明细和管理费信息
   - 财务统计数据

### 用户系统表
- **Users** - 用户账户和认证信息
- **User_Sessions** - 会话管理

## 👥 用户账户

### 管理员账户
- **用户名**: admin
- **密码**: admin123
- **权限**: 查看所有房产和财务数据

### 业主账户
- **格式**: owner_[业主ID]
- **密码**: 手机号后4位或默认密码123456
- **权限**: 仅查看自己的房产和收入明细

## 🛠️ 技术栈

- **后端框架**: Python Flask
- **数据库**: MySQL (Aiven云数据库)
- **部署平台**: Render
- **前端**: HTML5, CSS3, JavaScript, Bootstrap
- **Python版本**: 3.11.7

## ⚙️ 部署配置

### 环境变量
系统通过以下环境变量进行配置：

```bash
# 数据库配置
DB_HOST=gng-4d77d5e-gngvacation-8888.f.aivencloud.com
DB_PORT=21192
DB_DATABASE=defaultdb
DB_USER=avnadmin
DB_PASSWORD=[您的数据库密码]

# Flask应用配置
APP_SECRET_KEY=[生成的安全密钥]
```

### Render部署设置
- **启动命令**: `python real_estate_web.py`
- **Python版本**: 指定在 `runtime.txt` 中
- **依赖管理**: `requirements.txt`

## 📊 数据统计

- **房产数量**: 113条记录
- **业主数量**: 91条记录（去重后）
- **财务记录**: 93条记录
- **覆盖地区**: 加州、德州等多个州

## 🔐 安全措施

- 密码使用PBKDF2-HMAC-SHA256算法加密
- SSL/TLS加密数据传输
- 环境变量管理敏感信息
- 基于角色的访问控制
- 会话超时和安全管理

## 📱 主要功能页面

- **登录页面**: 用户认证入口
- **管理员仪表板**: 全局数据查看和管理
- **业主仪表板**: 个人房产和收入查询
- **房产详情**: 房产信息展示
- **收入明细**: 财务数据查询

## 🚀 使用指南

### 管理员用户
1. 使用admin账户登录
2. 查看所有房产信息
3. 管理业主数据
4. 查看财务统计

### 业主用户
1. 使用owner_[ID]格式账户登录
2. 查看自己的房产列表
3. 查看收入明细
4. 下载财务报表

## 🔧 开发和维护

### 数据库连接
- 使用Aiven MySQL云数据库
- SSL连接但禁用证书验证
- 连接池管理优化性能

### 日志和监控
- 应用启动日志
- 用户登录审计
- 数据库连接状态监控

## 📈 性能优化

- 数据库索引优化
- 查询性能调优
- 会话管理优化
- 静态资源缓存

## 🤝 技术支持

如需技术支持或功能改进，请联系系统管理员。

## 📄 更新日志

- **最新版本**: 支持双用户类型登录系统
- **数据库**: 迁移至Aiven MySQL云数据库
- **部署**: 成功部署至Render云平台
- **安全**: 实现完整的用户认证和权限控制系统

---

**注意**: 本系统为在线生产环境，请妥善保管登录凭证，如有账户问题请联系管理员。 